enum UserCategory {
  Main
  Co
  Assistant
  Practicum
  @@map("분류__t")
}


model User {
  id         Int           @id @default(autoincrement())
  name       String?
  userEmail String?      @map("userEamil")
  password   String?
  userphoneNumber String?       @map("userphoneNumber")
  category   UserCategory? @map("분류")

  // Relations
  instructor Instructor?

  @@map("user")
  @@unique([userid], map: "user_userid_unique")
}

model Instructor {
  userId        Int      @id @map("user_id")
  teamId        Int?     @map("team_id")
  location      String?  @db.Text
  levelId       Int?     @map("강사등급id")
  generation    Int?     @map("기수") @db.SmallInt
  restrictedArea String? @map("제한지역") @db.Text
  lat      Float?  @map("위도")
  lng      Float?  @map("경도")
  
  // relations
  user   User                @relation(fields: [userId], references: [id])
  team   Team?               @relation(fields: [teamId], references: [id])
  level  InstructorLevel?    @relation(fields: [levelId], references: [id])

  availabilities   InstructorAvailability[]
  virtues          InstructorVirtue[]
  distances        InstructorUnitDistance[]
  messageReceipts  MessageReceipt[]
  assignments      LectureInstructorAssignment[]

  @@map("강사")
}

model Team {
  id   Int     @id @default(autoincrement())
  name String? @map("team_name") 

  instructors Instructor[]

  @@map("team")
}

model InstructorLevel {
  id   Int     @id @default(autoincrement())
  name String? @map("강사등급")

  instructors Instructor[]

  @@map("강사등급")
}

model Virtue {
  id   Int     @id @default(autoincrement())
  name String? @map("덕목") 

  instructorVirtues InstructorVirtue[]

  @@map("덕목")
}

model InstructorVirtue {
  instructorId Int @map("강사id")
  virtueId     Int @map("덕목id")

  instructor Instructor @relation(fields: [instructorId], references: [userId])
  virtue     Virtue     @relation(fields: [virtueId], references: [id])

  @@map("강사가능덕목")
  @@id([instructorId, virtueId]) // 동일 (강사,덕목) 중복 방지
}